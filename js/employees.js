// employees.js - Company hierarchy functionality// Employee dataconst employees = [    {        id: 1,        name: "АЛЕКСА МАРИНКОВИЋ",        role: "ИЗВРШНИ ДИРЕКТОР",        level: 255,        department: "management",        hireDate: "2018-03-15",        email: "aleksa@marinsystems.rs",        phone: "+381 64 123 4567",        bio: "Алекса је оснивач и извршни директор Марин Системса. Са преко 10 година искуства у IT индустрији, води стратешки развој компаније и иновативне пројекте.",        skills: ["Стратешко руковођење", "ИТ консалтинг", "Развој пословања", "Техничка архитектура"],        avatar: "assets/portraits/alexa.png",        status: "online",        reportsTo: null    },    {        id: 2,        name: "МИЛИЦА ПЕТРОВИЋ",        role: "ТЕХНИЧКИ ДИРЕКТОР",        level: 200,        department: "development",        hireDate: "2019-06-10",        email: "milica@marinsystems.rs",        phone: "+381 64 234 5678",        bio: "Милица руководи техничким тимом и осигурава квалитет софтверских решења. Специјализована је за cloud архитектуру и DevOps праксе.",        skills: ["Cloud архитектура", "DevOps", "Менаџмент тима", "Сигурност система"],        avatar: "assets/portraits/milica.png",        status: "online",        reportsTo: 1    },    {        id: 3,        name: "МАРКО ЈОВАНОВИЋ",        role: "ОПЕРАТИВНИ ДИРЕКТОР",        level: 190,        department: "operations",        hireDate: "2019-08-22",        email: "marko@marinsystems.rs",        phone: "+381 64 345 6789",        bio: "Марко управља дневним операцијама компаније и осигурава ефикасност свих процеса. Специјалиста за оптимизацију пословних токова.",        skills: ["Оперативни менаџмент", "Процесна оптимизација", "Пројекат менаџмент", "Финансијска анализа"],        avatar: "assets/portraits/marko.png",        status: "away",        reportsTo: 1    },    {        id: 4,        name: "АНА СТОЈАНОВИЋ",        role: "ШЕФ РАЗВОЈА СОФТВЕРА",        level: 150,        department: "development",        hireDate: "2020-01-15",        email: "ana@marinsystems.rs",        phone: "+381 64 456 7890",        bio: "Ана руководи тимом развојника и надгледа имплементацију сложених софтверских система. Специјализована је за backend развој.",        skills: ["Backend развој", "Менаџмент пројеката", "Тестирање софтвера", "Базе података"],        avatar: "assets/portraits/ana.png",        status: "online",        reportsTo: 2    },    {        id: 5,        name: "СТЕВАН НИКОЛИЋ",        role: "ШЕФ ТЕХНИЧКЕ ПОДРШКЕ",        level: 140,        department: "technical",        hireDate: "2020-02-20",        email: "stevan@marinsystems.rs",        phone: "+381 64 567 8901",        bio: "Стеван руководи тимом техничке подршке и осигурава време одзива на инциденте. Специјалиста за решавање комплексних техничких проблема.",        skills: ["Техничка подршка", "Мрежна инфраструктура", "Хардверска подршка", "Кризни менаџмент"],        avatar: "assets/portraits/stevan.png",        status: "online",        reportsTo: 2    },    {        id: 6,        name: "ЈЕЛЕНА МИХАЈЛОВИЋ",        role: "ШЕФ ПРОИЗВОДЊЕ",        level: 135,        department: "production",        hireDate: "2020-03-05",        email: "jelena@marinsystems.rs",        phone: "+381 64 678 9012",        bio: "Јелена управља процесима производње и осигурава квалитет израде хардверских компоненти. Специјализована за контролу квалитета.",        skills: ["Управљање производњом", "Контрола квалитета", "Логистика", "Процесна оптимизација"],        avatar: "assets/portraits/jelena.png",        status: "offline",        reportsTo: 3    },    {        id: 7,        name: "НИКОЛА ДИМИТРИЈЕВИЋ",        role: "СЕНИОР РАЗВОЈНИК",        level: 120,        department: "development",        hireDate: "2020-09-12",        email: "nikola@marinsystems.rs",        phone: "+381 64 789 0123",        bio: "Никола је сениор развојник специјализован за React и Node.js екосистем. Води сложене пројекте и менторира млађе колеге.",        skills: ["React.js", "Node.js", "TypeScript", "API дизајн"],        avatar: "assets/portraits/nikola.png",        status: "online",        reportsTo: 4    },    {        id: 8,        name: "САРА ИЛИЋ",        role: "СЕНИОР ДИЗАЈНЕР",        level: 115,        department: "design",        hireDate: "2021-01-18",        email: "sara@marinsystems.rs",        phone: "+381 64 890 1234",        bio: "Сара је сениор дизајнер са искуством у UI/UX дизајну. Ствара интуитивне и визуелно привлачне корисничке интерфејсе.",        skills: ["UI/UX дизајн", "Figma", "Дизајн система", "Прототиповање"],        avatar: "assets/portraits/sara.png",        status: "online",        reportsTo: 4    },    {        id: 9,        name: "ДУШАН ПОПОВИЋ",        role: "СЕНИОР ТЕХНИЧАР",        level: 110,        department: "technical",        hireDate: "2021-02-25",        email: "dusan@marinsystems.rs",        phone: "+381 64 901 2345",        bio: "Душан је сениор техничар специјализован за серверску инфраструктуру и мрежну безбедност. Решава најкомплексније техничке изазове.",        skills: ["Серверска администрација", "Мрежна безбедност", "Linux системи", "Виртуелизација"],        avatar: "assets/portraits/dusan.png",        status: "away",        reportsTo: 5    },    {        id: 10,        name: "ТАМАРА СИМИЋ",        role: "СЕНИОР 3D МОДЕЛЕР",        level: 105,        department: "design",        hireDate: "2021-03-30",        email: "tamara@marinsystems.rs",        phone: "+381 64 012 3456",        bio: "Тамара је сениор 3D моделер са искуством у индустријском дизајну и прототиповању. Специјализована за CAD моделирање.",        skills: ["3D моделирање", "CAD дизајн", "Брза прототипизација", "Рендеринг"],        avatar: "assets/portraits/tamara.png",        status: "online",        reportsTo: 6    },    {        id: 11,        name: "ИВАН СТАНКОВИЋ",        role: "РАЗВОЈНИК СОФТВЕРА",        level: 85,        department: "development",        hireDate: "2021-07-15",        email: "ivan@marinsystems.rs",        phone: "+381 64 123 7890",        bio: "Иван је развојник софтвера фокусиран на frontend развој. Учествује у изради клијентских апликација и осигурава њихову перформансу.",        skills: ["JavaScript", "Vue.js", "CSS/SCSS", "Тестирање"],        avatar: "assets/portraits/ivan.png",        status: "online",        reportsTo: 7    },    {        id: 12,        name: "МАРИЈА ТОДОРОВИЋ",        role: "ДИЗАЈНЕР ПРОИЗВОДА",        level: 80,        department: "design",        hireDate: "2021-08-20",        email: "marija@marinsystems.rs",        phone: "+381 64 234 8901",        bio: "Марија је дизајнер производа који ради на визуелном идентитету компаније и дизајну производа. Фокусирана на корисничко искуство.",        skills: ["Дизајн производа", "Графички дизајн", "Брендирање", "Дизајн интерфејса"],        avatar: "assets/portraits/marija.png",        status: "online",        reportsTo: 8    },    {        id: 13,        name: "ПЕТАР ЖИВАНОВИЋ",        role: "ТЕХНИЧАР ХАРДВЕРА",        level: 75,        department: "technical",        hireDate: "2021-09-10",        email: "petar@marinsystems.rs",        phone: "+381 64 345 9012",        bio: "Петар је техничар хардвера специјализован за поправку и одржавање рачунарске опреме. Има искуство са различитим врстама хардвера.",        skills: ["Поправка хардвера", "Дијагностика", "Одржавање опреме", "Компонентна замена"],        avatar: "assets/portraits/petar.png",        status: "offline",        reportsTo: 9    }];// Initialize the pagedocument.addEventListener('DOMContentLoaded', function() {    console.log('Employees page initialized');        // Calculate statistics    updateStatistics();        // Setup event listeners    setupEventListeners();        // Initialize grid view    populateGridView();        // Draw connection lines    setTimeout(drawConnectionLines, 500);        // Animate cards    animateCards();        // Setup search functionality    setupSearch();});// Update statisticsfunction updateStatistics() {    const totalEmployees = employees.length;    const onlineEmployees = employees.filter(emp => emp.status === 'online').length;    const avgLevel = Math.round(employees.reduce((sum, emp) => sum + emp.level, 0) / totalEmployees);        document.getElementById('totalEmployees').textContent = totalEmployees;    document.getElementById('onlineEmployees').textContent = onlineEmployees;    document.getElementById('avgLevel').textContent = avgLevel;}// Setup event listenersfunction setupEventListeners() {    // View toggle    const viewToggle = document.getElementById('viewToggle');    const hierarchyView = document.getElementById('hierarchyView');    const gridView = document.getElementById('gridView');        if (viewToggle) {        viewToggle.addEventListener('click', function() {            const icon = this.querySelector('i');            const text = this.querySelector('span');                        if (hierarchyView.classList.contains('active')) {                // Switch to grid view                hierarchyView.classList.remove('active');                gridView.classList.add('active');                icon.className = 'fas fa-sitemap';                text.textContent = 'Пребаци на хијерархију';            } else {                // Switch to hierarchy view                gridView.classList.remove('active');                hierarchyView.classList.add('active');                icon.className = 'fas fa-th-large';                text.textContent = 'Пребаци приказ';            }        });    }        // Search toggle    const searchToggle = document.getElementById('searchToggle');    const searchPanel = document.getElementById('searchPanel');        if (searchToggle && searchPanel) {        searchToggle.addEventListener('click', function() {            searchPanel.classList.toggle('active');            if (searchPanel.classList.contains('active')) {                document.getElementById('employeeSearch').focus();            }        });    }        // Department filter    const departmentFilter = document.getElementById('departmentFilter');    if (departmentFilter) {        departmentFilter.addEventListener('change', filterGridEmployees);    }        // Level filter    const levelFilter = document.getElementById('levelFilter');    if (levelFilter) {        levelFilter.addEventListener('change', filterGridEmployees);    }}// Populate grid viewfunction populateGridView() {    const gridContainer = document.getElementById('gridEmployees');    if (!gridContainer) return;        gridContainer.innerHTML = '';        employees.forEach(employee => {        const card = createEmployeeCard(employee);        gridContainer.appendChild(card);    });}// Create employee card for grid viewfunction createEmployeeCard(employee) {    const card = document.createElement('div');    card.className = `employee-card ${getCardClass(employee.level)}`;    card.dataset.id = employee.id;    card.dataset.department = employee.department;    card.dataset.level = getLevelGroup(employee.level);        card.innerHTML = `        <div class="employee-avatar">            <img src="${employee.avatar}" alt="${employee.name}" onerror="this.src='assets/default-avatar.png'">            <div class="status-badge ${employee.status}"></div>        </div>        <div class="employee-info">            <h3>${employee.name}</h3>            <div class="employee-role">${employee.role}</div>            <div class="employee-level">                <i class="fas fa-shield-alt"></i>                <span>Ниво: ${employee.level}</span>            </div>        </div>        <div class="card-actions">            ${getBadgeForLevel(employee.level)}        </div>    `;        card.addEventListener('click', () => viewEmployee(employee.id));    return card;}// Get card class based on levelfunction getCardClass(level) {    if (level >= 200) return 'director';    if (level >= 100) return 'senior';    return 'regular';}// Get level groupfunction getLevelGroup(level) {    if (level >= 200) return 'executive';    if (level >= 100) return 'senior';    return 'regular';}// Get badge for levelfunction getBadgeForLevel(level) {    if (level >= 200) return '<span class="badge badge-silver">Директор</span>';    if (level >= 150) return '<span class="badge badge-bronze">Шеф одељења</span>';    if (level >= 100) return '<span class="badge badge-blue">Сениор</span>';    return '';}// Filter grid employeesfunction filterGridEmployees() {    const department = document.getElementById('departmentFilter').value;    const level = document.getElementById('levelFilter').value;    const cards = document.querySelectorAll('#gridEmployees .employee-card');        cards.forEach(card => {        let show = true;                if (department && card.dataset.department !== department) {            show = false;        }                if (level && card.dataset.level !== level) {            show = false;        }                card.style.display = show ? 'block' : 'none';    });}// Draw connection linesfunction drawConnectionLines() {    const svg = document.getElementById('connectionLines');    if (!svg) return;        svg.innerHTML = '';        // Get CEO position    const ceoCard = document.querySelector('.employee-card.ceo');    if (!ceoCard) return;        const ceoRect = ceoCard.getBoundingClientRect();    const containerRect = document.querySelector('.container').getBoundingClientRect();        // Draw lines to directors    const directors = document.querySelectorAll('.employee-card.director');    directors.forEach((director, index) => {        const directorRect = director.getBoundingClientRect();                const x1 = ceoRect.left + ceoRect.width / 2 - containerRect.left;        const y1 = ceoRect.bottom - containerRect.top;        const x2 = directorRect.left + directorRect.width / 2 - containerRect.left;        const y2 = directorRect.top - containerRect.top;                // Draw curved line        const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');        const curveHeight = 50;        const pathData = `M ${x1} ${y1} C ${x1} ${y1 + curveHeight}, ${x2} ${y2 - curveHeight}, ${x2} ${y2}`;                path.setAttribute('d', pathData);        path.setAttribute('stroke', '#4cc9f0');        path.setAttribute('stroke-width', '2');        path.setAttribute('fill', 'none');        path.setAttribute('stroke-dasharray', '5,5');        path.style.animation = `drawLine 1s ease-out ${index * 0.1}s forwards`;                svg.appendChild(path);    });}// Animate cardsfunction animateCards() {    const cards = document.querySelectorAll('.employee-card');    cards.forEach((card, index) => {        card.style.animationDelay = `${index * 0.05}s`;    });}// Setup search functionalityfunction setupSearch() {    const searchInput = document.getElementById('employeeSearch');    const searchResults = document.getElementById('searchResults');        if (!searchInput || !searchResults) return;        searchInput.addEventListener('input', function() {        const query = this.value.toLowerCase().trim();                if (query.length < 2) {            searchResults.style.display = 'none';            return;        }                const filtered = employees.filter(employee =>             employee.name.toLowerCase().includes(query) ||            employee.role.toLowerCase().includes(query) ||            employee.department.toLowerCase().includes(query)        );                displaySearchResults(filtered);    });        searchInput.addEventListener('focus', function() {        const query = this.value.trim();        if (query.length >= 2) {            searchResults.style.display = 'block';        }    });        document.addEventListener('click', function(e) {        if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {            searchResults.style.display = 'none';        }    });}// Display search resultsfunction displaySearchResults(results) {    const searchResults = document.getElementById('searchResults');    if (!searchResults) return;        searchResults.innerHTML = '';        if (results.length === 0) {        searchResults.innerHTML = '<div class="search-result-item">Нема резултата за претрагу</div>';        searchResults.style.display = 'block';        return;    }        results.forEach(employee => {        const resultItem = document.createElement('div');        resultItem.className = 'search-result-item';        resultItem.innerHTML = `            <div style="display: flex; align-items: center; gap: 10px;">                <img src="${employee.avatar}" alt="${employee.name}"                      style="width: 40px; height: 40px; border-radius: 50%; object-fit: cover;"                     onerror="this.src='assets/default-avatar.png'">                <div>                    <div style="font-weight: 600;">${employee.name}</div>                    <div style="font-size: 0.85rem; color: #666;">${employee.role}</div>                </div>            </div>        `;                resultItem.addEventListener('click', () => {            viewEmployee(employee.id);            searchResults.style.display = 'none';            document.getElementById('employeeSearch').value = '';        });                searchResults.appendChild(resultItem);    });        searchResults.style.display = 'block';}// View employee profilefunction viewEmployee(id) {    // Store employee ID in localStorage    localStorage.setItem('selectedEmployeeId', id);        // Redirect to employee profile page    window.location.href = 'employee.html';}// Show all stafffunction showAllStaff() {    const level5 = document.querySelector('.level-5 .employees-grid');    if (!level5) return;        // Add remaining employees    const remainingEmployees = employees.slice(13); // After Petar        remainingEmployees.forEach(employee => {        const card = createEmployeeCard(employee);        level5.insertBefore(card, level5.lastElementChild);    });        // Hide the "Show more" card    const moreCard = document.querySelector('.more-card');    if (moreCard) {        moreCard.style.display = 'none';    }        // Update statistics    updateStatistics();}// Add CSS animation for drawing linesconst style = document.createElement('style');style.textContent = `@keyframes drawLine {    to {        stroke-dashoffset: 0;    }}@keyframes slideInRight {    to {        opacity: 1;        transform: translateX(0);    }}@keyframes pulseGlow {    0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); }    50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.6); }}`;document.head.appendChild(style);